{"version":3,"file":"vdom.js","sources":["../src/util/console.js","../src/vdom/vnode.js","../src/util/createVdom.js","../src/util/is.js","../src/util/help.js","../src/util/api.js","../src/instance/baseInit.js","../src/index.js"],"sourcesContent":["export function error(info, context=null){\n\tif(typeof console !== 'undeifine'){\n\t\tconsole.error(info)\n\t}\n}","export function Vdom(){\n\treturn  {\n\t\ttagName: null,\n\t\tsel: null,\n\t\tid: null,\n\t\tclassName: [],\n\t\tchildren: [],\n\t\tel: null,\n\t\tkey: null\n\t};\n}\n","import  { isString, isObject, isArray, createEle} from './index'\nimport { Vdom } from '../vdom/index'\n\nfunction parseQuery(vdom, query){\n\tlet k,\n\t\tstate = 0,\n\t\tj = 0;\n\tfor(let i = 0, len = query.length; i < len; i++){\n\t\tlet char = query[i];\n\t\t\tif(char === '.' || char === '#' || (k = i === len-1)){\n\t\t\t\tif(state === 0){\n\t\t\t\t\tvdom.tagName = query.substring(j, !k ? i : len);\n\t\t\t\t}else if(state === 1){\n\t\t\t\t\tvdom.className.push(query.substring(j, !k ? i : len));\n\t\t\t\t}else if(state === 2){\n\t\t\t\t\tvdom.id = query.substring(j, !k ? i : len);\n\t\t\t\t}\n\t\t\t\tstate = (char === '.') ? 1 : (char === '#')? 2 : 3;\n\t\t\t\tj = i+1;\n\t\t\t}\t\t\n\n\t}\n\t\n}\nfunction parseData(vdom, v){\n\tlet i;\n\tvdom.data = v;\n\tif((i = v.class) != null && i.length > 0){\n\t\ti.split(' ').forEach(function(v, j){\n\t\t\tvdom.className.push(v);\n\t\t});\n\t}\n}\nexport function createVdom(arg){\n\tlet i=0,\n\t\tvd = new Vdom;\n\n\twhile(i < arg.length){\n\t\tlet v = arg[i];\n\t\tif(i === 0 && isString(v)){\n\t\t\t// div#id.classA\n\t\t\tvd.sel = v;\n\t\t\tparseQuery(vd, v)\n\t\t}else if(i != 0 && isObject(v)){\n\t\t\t// class style clickEvent\n\t\t\tparseData(vd, v)\n\t\t}else if(i != 0 && isArray(v)){\n\t\t\t// childern\n\t\t\tvd.children = v;\n\t\t}\n\t\ti++;\n\t}\n\t//createEle(vd);// create true dom\n\tconsole.log(vd)\n\treturn vd;\n}","function judge(o){\n\treturn Object.prototype.toString.call(o);\n}\n\nexport function isArray(arr){\n\treturn judge(arr) === '[object Array]';\n}\n\nexport function isObject(o){\n\treturn judge(o) === '[object Object]';\n}\n\nexport function isFunction(f){\n\treturn typeof f === 'function';\n}\t\n\nexport function isString(s){\n\treturn typeof s === 'string';\n}\n\nexport function isNumber(n){\n\treturn typeof n === 'number';\n}\n\nexport function existLetter(s, l){\n\treturn s.indexOf(l) > -1;\n}\n\nexport let isBrowser = true;\ntry{\n\tisBrowser = typeof window !== 'undefined' && isObject(window) !== '[object Object]';\n}catch(e){\n\tisBrowser = false;\n}\n\n\n\n\n\n","export function toArray(arr){\n\treturn [].slice.call(arr);\n}","import { isBrowser ,error, isArray, isObject } from './index'\n\nexport let api = Object.create(null);\n\nif(isBrowser){\n\tapi.createElement = function(tag){\n\t\treturn document.createElement(tag);\n\t}; \n\tapi.createTextNode = function(txt){\n\t\treturn document.createTextNode(txt);\n\t};\n\tapi.appendChild = function(parent, child){\n\t\treturn parent.appendChild(child);\n\t};\n\tapi.setAttribute = function(ele, key, value){\n\t\tele.setAttribute(key, value);\n\t};\n\tapi.parentNode = function(node){\n\t\treturn node.parentNode;\n\t};\n\tapi.insertBefore = function(parent, newNode, rf){\n\t\treturn parent.insertBefore(newNode, rf);\n\t};\n\tapi.nextSibling = function(el){\n\t\treturn el.nextSibling;\n\t};\n\tapi.removeChild = function(parent, rc){\n\t\treturn parent.removeChild(rc);\n\t};\n\tapi.appendChildren = function(ele, children){\n\t\tif(ele && isArray(children)){\n\t\t\tfor(let i = 0; i < children.length; i++){\n\t\t\t\tlet c = children[i].el ? children[i].el : this.createTextNode(children[i]);\n\t\t\t\tthis.appendChild(ele, c);\n\t\t\t}\n\t\t}\n\t};\n\tapi.addClass = function(ele, c){\n\t\tif(ele && isArray(c)){\n\t\t\tfor(let i = 0; i < c.length; i++){\n\t\t\t\tele.classList.add(c[i]);\n\t\t\t}\n\t\t}\n\t};\n\tapi.setAttrs = function(ele, a){\n\t\tif(ele && isObject(a)){\n\t\t\tfor(let k in a){\n\t\t\t\tif(k === 'class') continue;\n\t\t\t\tlet s = a[k];\n\t\t\t\tif(k === 'style' && isObject(s)){\n\t\t\t\t\tfor(let j in s){\n\t\t\t\t\t\tele.style[j] = s[j];\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\tthis.setAttribute(ele, k, s);\n\t\t\t}\n\t\t}\n\t};\n}else{\n\terror(\"There is not in browser's env\");\n}\n\n\n\n\n\n\n\n\n\n\n\n\n\n","import { createVdom, isArray, error, toArray}  from '../util/index'\n\nexport function baseInit(Mdom){\n\tMdom.prototype._init = function(arg){\n\t\tif(arg.length === 0){\n\t\t\terror('初始化参数不能为空')\n\t\t\treturn;\n\t\t}\n\t\tif(isArray(arg) && arg.length > 0) {\n\t\t\tconst op = parseOption.call(this,arg)\n\t\t}\t\n\t}\n\twindow.el = function(){\n\t\tconst arg = toArray(arguments);\n\n\t\tif(arg.length === 0){\n\t\t\terror('初始化参数不能为空')\n\t\t\treturn;\n\t\t}\n\t\tif(isArray(arg) && arg.length > 0) {\n\t\t\treturn createVdom.call(this,arg);\n\t\t}\t\n\t\t \n\t}\n}","import { baseInit } from './instance/baseInit'\nimport { isBrowser, toArray} from './util/index'\nexport function Aoy(){\n\tif(this instanceof Aoy){\n\t\tconst arg = toArray(arguments);\n\t\tthis._init(arg);\n\t}\t\n}\n\nbaseInit(Aoy)\n\nif(isBrowser) window.Aoy = Aoy;"],"names":["let","createVdom","api","this","const"],"mappings":"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"}